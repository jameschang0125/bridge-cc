\newcommand\bin[1]{
\lstinputlisting[label={#1}]{#1}
}

% trimmed unused packages
\usepackage{xparse}
\usepackage{lmodern}
\usepackage[T1]{fontenc}

% (intentionally left minimal; removed older unused demo commands)

% Color theme â€” My favorite 2
\definecolor{Fav2BidLabel}{HTML}{7C3AED}
\definecolor{Fav2BidDesc}{HTML}{A25DD0}
\definecolor{Fav2SubText}{HTML}{59709C}
\definecolor{Fav2SubExtra}{HTML}{23A0ED}
\definecolor{Fav2SubsubX}{HTML}{085D53}
\definecolor{Fav2SubsubY}{HTML}{34D399}
\definecolor{bidBackgroundColor}{RGB}{248, 248, 246}
\colorlet{bidLabelColor}{Fav2BidLabel}
\colorlet{bidDescColor}{Fav2BidDesc}
\colorlet{subbidTextColor}{Fav2SubText}
\colorlet{subbidExtraColor}{Fav2SubExtra}
\colorlet{subsubXColor}{Fav2SubsubX}
\colorlet{subsubYColor}{Fav2SubsubY}

% Fixed-width columns for alignment
\newlength{\bidLeftWidth}\setlength{\bidLeftWidth}{.60\linewidth}
\newlength{\bidRightWidth}\setlength{\bidRightWidth}{.40\linewidth}

% Initialize global variables and counter
\newcounter{bidNeed}
\setcounter{bidNeed}{0}
\gdef\bidLabel{}\gdef\bidDesc{}

% bidsemi: use plain "\bid{A}[desc]" and "\subbid{<text>}[extra]"
% Command to output standalone bids (bids without subbids)
\NewDocumentCommand{\flushbid}{}{%
\ifnum\value{bidNeed}=1\relax
  {\color{bidLabelColor}\texttt{\bfseries \bidLabel}}{\texttt{\color{bidDescColor}\small\ \bidDesc}} & \tabularnewline
  \setcounter{bidNeed}{0}%
\fi
}
\NewDocumentCommand{\bid}{m o}{%
  \setcounter{bidNeed}{1}%
  \IfValueTF{#2}{\gdef\bidLabel{#1:}\gdef\bidDesc{#2}}{\gdef\bidLabel{#1}\gdef\bidDesc{}}%
}
\NewDocumentCommand{\subbid}{m o}{%
  \ifnum\value{bidNeed}=1\relax
    \def\bidLeftCell{{\color{bidLabelColor}\texttt{\bfseries \bidLabel}}{\texttt{\color{bidDescColor}\small\ \bidDesc}}}%
    \setcounter{bidNeed}{0}%
  \else
    \def\bidLeftCell{}%
  \fi
  \bidLeftCell & {\ttfamily\small {\color{subbidTextColor}#1}\IfValueT{#2}{{\ \texttt{\color{subbidExtraColor}\small #2}}}}\tabularnewline
}
% Sub-item under right column with indentation; X dark grey, Y light grey
\NewDocumentCommand{\subsubbid}{m o}{%
  {} & {\ttfamily\small \hspace*{1.2em}{\color{subsubXColor}#1}\IfValueT{#2}{{\ \texttt{\color{subsubYColor}\small #2}}}}\tabularnewline
}
\newenvironment{bidsemi}{%
  \par\vspace{0.3em}%
  \begin{tcolorbox}[
    colback=bidBackgroundColor,
    colframe=gray!50,
    boxrule=0.5pt,
    top=0.1em,
    bottom=0.15em,
    left=0.4em,
    right=0.4em,
    boxsep=0pt,
    arc=2pt
  ]
  \ttfamily\small\parskip=0pt\parindent=0pt%
  \setcounter{bidNeed}{0}\gdef\bidLabel{}\gdef\bidDesc{}%
  \begin{tabular}{@{}p{\bidLeftWidth}@{\hspace{0.6em}}p{\bidRightWidth}@{}}%
}{%
  \ifnum\value{bidNeed}=1\relax
    % Output any pending bid at the end
    {\color{bidLabelColor}\texttt{\bfseries \bidLabel}}{\texttt{\color{bidDescColor}\small\ \bidDesc}} & \\
  \fi
  \end{tabular}%
  \end{tcolorbox}%
  \vspace{0.3em}\par%
}